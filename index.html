<DOCTYPE html>
<html>
    <head>
        <title>Voting</title>
        <script src="https://code.jquery.com/jquery.min.js"></script>
    </head>
    <body>
        <strong><big>2018 이천고 학생회장 모의선거</big></strong> <br />
        <input type="number" id="vote">

        <button id="send" onclick="send_click();" type="button">Send</button><br />

        <input type="text" id="privatekey">

        <script>
            var contract
            function send_click() { transfer(); }

            $.getJSON('Vote.json', function (abi) {
                contract = window.web3.eth.contract(abi).at('0x8290807bd15a6c52fcd371be36ead9e0529b82c4')
            })

            function transfer() {
                web3.eth.accounts.wallet.add(document.getElementbyId("privatekey").value)

                contract.vote.sendTransaction(document.getElementbyId("vote").value, { from: web3.eth.accounts[0], gas: 21000 }, function (error, result) {
                    if (!error) { console.log(result); } else { console.log(error); }
                })

                web3.eth.accounts.wallet.clear();
            }
        </script>
    </body>
</html>
